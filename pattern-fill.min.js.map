{"version":3,"file":"pattern-fill.min.js","sources":["pattern-fill.js"],"names":["Highcharts","idCounter","wrap","SVGElement","prototype","proceed","color","prop","elem","markup","id","pattern","image","this","renderer","createElement","attr","patternUnits","width","height","add","defs","setAttribute","url","call","VMLElement","Renderer","Element","getElementsByTagName","length","removeChild","color1","color2","join","prepVML","appendChild","document","parentNode","nodeType","outerHTML"],"mappings":"CAiBA,SAAUA,GAEN,YAEA,IAAIC,GAAY,CAEhBD,GAAWE,KAAKF,EAAWG,WAAWC,UAAW,aAAc,SAASC,EAASC,EAAOC,EAAMC,GAC1F,GAAIC,GAAQC,EAAIC,EAASC,CAEzB,IAAIN,GAASA,EAAMK,SAAWJ,IAAS,OAAQ,CAC3CG,EAAK,sBAAwBT,GAC7BU,GAAUE,KAAKC,SAASC,cAAc,WACjCC,MACGN,GAAIA,EACJO,aAAc,iBACdC,MAAOZ,EAAMY,MACbC,OAAQb,EAAMa,SAEjBC,IAAIP,KAAKC,SAASO,KACvBT,GAAQC,KAAKC,SAASF,MAClBN,EAAMK,QAAS,EAAG,EAAGL,EAAMY,MAAOZ,EAAMa,QAC1CC,IAAIT,EACNH,GAAKc,aAAaf,EAAM,OAASM,KAAKC,SAASS,IAAM,IAAMb,EAAK,SAC7D,CACH,MAAOL,GAAQmB,KAAKX,KAAMP,EAAOC,EAAMC,KAI/C,IAAIR,EAAWyB,WAAY,CACvBzB,EAAWE,KAAKF,EAAW0B,SAAStB,UAAUuB,QAAQvB,UAAW,aAAc,SAASC,EAASC,EAAOC,EAAMC,GAC1G,GAAIC,EAEJ,IAAIH,GAASA,EAAMK,SAAWJ,IAAS,OAAQ,CAE3C,GAAIC,EAAKoB,qBAAqB,QAAQC,OAAQ,CAC1CrB,EAAKsB,YAAYtB,EAAKoB,qBAAqB,QAAQ,IAKvD,GAAItB,EAAMyB,QAAUzB,EAAM0B,OAAQ,CAC9BvB,GAAU,QAASF,EAAM,WAAYD,EAAMyB,OAAQ,aAC/CzB,EAAM0B,OAAQ,yBAA0B1B,EAAMK,QAAS,QAAQsB,KAAK,QACrE,CACHxB,EAASI,KAAKC,SAASoB,SAAS,IAAK3B,EAAM,qBAAsBD,EAAMK,QAAS,SAGpFH,EAAK2B,YACDC,SAASrB,cAAcN,GAI3B,IAAID,EAAK6B,WAAWC,WAAa,EAAG,CAChC9B,EAAK+B,UAAY/B,EAAK+B,eAGvB,CACH,MAAOlC,GAAQmB,KAAKX,KAAMP,EAAOC,EAAMC,SAIpDR","sourcesContent":["/**\n * Highcharts pattern fill plugin\n *\n * Author:         Torstein Honsi\n * Last revision:  2014-04-29\n * License:        MIT License\n *\n * Options:\n * - pattern:      The URL for a pattern image file\n * - width:        The width of the image file\n * - height:       The height of the image file\n * - color1:       In oldIE, bright colors in the pattern image are replaced by this color.\n *                 Not yet implemented in SVG.\n * - color2:       In oldIE, dark colors are replaced by this.\n */\n\n/*global Highcharts */\n(function(Highcharts) {\n\n    'use strict';\n\n    var idCounter = 0;\n\n    Highcharts.wrap(Highcharts.SVGElement.prototype, 'fillSetter', function(proceed, color, prop, elem) {\n        var markup, id, pattern, image;\n\n        if (color && color.pattern && prop === 'fill') {\n            id = 'highcharts-pattern-' + idCounter++;\n            pattern = this.renderer.createElement('pattern')\n                .attr({\n                    id: id,\n                    patternUnits: 'userSpaceOnUse',\n                    width: color.width,\n                    height: color.height\n                })\n                .add(this.renderer.defs);\n            image = this.renderer.image(\n                color.pattern, 0, 0, color.width, color.height\n            ).add(pattern);\n            elem.setAttribute(prop, 'url(' + this.renderer.url + '#' + id + ')');\n        } else {\n            return proceed.call(this, color, prop, elem);\n        }\n    });\n\n    if (Highcharts.VMLElement) {\n        Highcharts.wrap(Highcharts.Renderer.prototype.Element.prototype, 'fillSetter', function(proceed, color, prop, elem) {\n            var markup;\n\n            if (color && color.pattern && prop === 'fill') {\n                // Remove previous fills\n                if (elem.getElementsByTagName('fill').length) {\n                    elem.removeChild(elem.getElementsByTagName('fill')[0]);\n                }\n\n                // If colors are given, use those, else use the original colors\n                // of the pattern tile\n                if (color.color1 && color.color2) {\n                    markup = ['<hcv:', prop, ' color=\"', color.color1, '\" color2=\"',\n                        color.color2, '\" type=\"pattern\" src=\"', color.pattern, '\" />'].join('');\n                } else {\n                    markup = this.renderer.prepVML(['<', prop, ' type=\"tile\" src=\"', color.pattern, '\" />']);\n                }\n\n                elem.appendChild(\n                    document.createElement(markup)\n                );\n\n                // Work around display bug on updating attached nodes\n                if (elem.parentNode.nodeType === 1) {\n                    elem.outerHTML = elem.outerHTML\n                }\n\n            } else {\n                return proceed.call(this, color, prop, elem);\n            }\n        });\n    }\n})(Highcharts);"]}